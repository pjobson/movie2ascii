<!DOCTYPE html>
<html>
<head>
<title>TOO MANY COOKS</title>
<link rel="stylesheet" type="text/css" href="assets/cssreset-min.css" />
<style type="text/css">

</style>
</head>
<body>
<audio id="audio" controls="controls">
	<source src="mp3/audio.mp3" type="audio/mpeg">
</audio>
<pre id="tmc">
</pre>

<script src="assets/jquery-1.11.2.min.js"></script>
<script type="text/javascript">
// Files are as such: img.0000000000.txt
var counter = {
	i: 1,
	last: 16097
};


$('#audio').bind('play',function(e) {
	startMovie();
});

$('#audio').bind('pause',function(e) {
	stopMovie();
});


var iterate = function() {
	var x = (counter.i++);
	if (x>counter.last) {
		return false;
	}
	x += '';
	while (x.length < 6) {
		x = '0'+x;
	}
	return x;
};

var getFrame = function() {
	$.ajax({
		url: 'txt/img.'+ iterate() +'.txt',
		success: function(res) {
			$('#tmc').html(res);
		}
	});
}

var stopMovie = function() {
	window.clearInterval(window.timer);
};

var startMovie = function() {
	window.timer = window.setInterval(function() {
		if (iterate !== false) {
			getFrame();
		} else {
			stopMovie();
		}
	},42);

}


</script>
</body>
</html>


